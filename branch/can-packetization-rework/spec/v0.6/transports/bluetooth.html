<!DOCTYPE html>
<html lang="en">
  <head>
    <link rel="apple-touch-icon" sizes="180x180" href="/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/favicons/favicon-16x16.png"><link rel="mask-icon" href="/favicons/safari-pinned-tab.svg" color="#5bbad5"><link rel="shortcut icon" href="/favicons/favicon.ico"><meta name="msapplication-TileColor" content="#2b5797"><meta name="msapplication-config" content="/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><title>BLE | ThingSet</title><meta name="description" content="The Data Accessibility Framework"><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="generator" content="VuePress 2.0.0-beta.23">
    <link rel="preload" href="/branch/can-packetization-rework/assets/js/runtime~app.21595170.js" as="script"><link rel="preload" href="/branch/can-packetization-rework/assets/css/styles.a9ee4913.css" as="style"><link rel="preload" href="/branch/can-packetization-rework/assets/js/9296.89757b8c.js" as="script"><link rel="preload" href="/branch/can-packetization-rework/assets/js/app.707d249a.js" as="script">
    <link rel="stylesheet" href="/branch/can-packetization-rework/assets/css/styles.a9ee4913.css">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><div class="theme-container"><header class="navbar"><div class="toggle-sidebar-button"><svg class="icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div><span><a href="/branch/can-packetization-rework/" class=""><img class="logo" src="/branch/can-packetization-rework/images/thingset-logo.png" alt="ThingSet"><span class="site-name can-hide">ThingSet</span></a></span><div class="navbar-links-wrapper" style=""><!--[--><!--]--><nav class="navbar-links can-hide"><!--[--><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="Software"><span class="title">Software</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="Software"><span class="title">Software</span><span class="right arrow"></span></button><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/branch/can-packetization-rework/software/node_library" class="nav-link" aria-label="Node Library"><!--[--><!--]--> Node Library <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/branch/can-packetization-rework/software/zephyr_sdk" class="nav-link" aria-label="SDK for Zephyr"><!--[--><!--]--> SDK for Zephyr <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/branch/can-packetization-rework/software/app" class="nav-link" aria-label="Mobile App"><!--[--><!--]--> Mobile App <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="Specification Menu"><span class="title">Specification</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="Specification Menu"><span class="title">Specification</span><span class="right arrow"></span></button><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/branch/can-packetization-rework/spec/v0.6/introduction/abstract" class="nav-link" aria-label="v0.6"><!--[--><!--]--> v0.6 <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/branch/can-packetization-rework/spec/v0.5/introduction" class="nav-link" aria-label="v0.5"><!--[--><!--]--> v0.5 <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/branch/can-packetization-rework/spec/v0.4/introduction" class="nav-link" aria-label="v0.4"><!--[--><!--]--> v0.4 <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/branch/can-packetization-rework/spec/v0.3/1a_introduction" class="nav-link" aria-label="v0.3"><!--[--><!--]--> v0.3 <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/branch/can-packetization-rework/spec/v0.2/1a_introduction" class="nav-link" aria-label="v0.2"><!--[--><!--]--> v0.2 <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/branch/can-packetization-rework/spec/v0.1/" class="nav-link" aria-label="v0.1"><!--[--><!--]--> v0.1 <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/branch/can-packetization-rework/spec/changelog" class="nav-link" aria-label="Changelog"><!--[--><!--]--> Changelog <!--[--><!--]--></a></li><!--]--></ul></div></div><!--]--></nav><!--[--><!--]--><button class="toggle-dark-button" title="toggle dark mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><form class="search-box" role="search"><input type="search" autocomplete="off" spellcheck="false" value><!----></form></div></header><div class="sidebar-mask"></div><aside class="sidebar"><nav class="navbar-links"><!--[--><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="Software"><span class="title">Software</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="Software"><span class="title">Software</span><span class="right arrow"></span></button><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/branch/can-packetization-rework/software/node_library" class="nav-link" aria-label="Node Library"><!--[--><!--]--> Node Library <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/branch/can-packetization-rework/software/zephyr_sdk" class="nav-link" aria-label="SDK for Zephyr"><!--[--><!--]--> SDK for Zephyr <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/branch/can-packetization-rework/software/app" class="nav-link" aria-label="Mobile App"><!--[--><!--]--> Mobile App <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="Specification Menu"><span class="title">Specification</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="Specification Menu"><span class="title">Specification</span><span class="right arrow"></span></button><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/branch/can-packetization-rework/spec/v0.6/introduction/abstract" class="nav-link" aria-label="v0.6"><!--[--><!--]--> v0.6 <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/branch/can-packetization-rework/spec/v0.5/introduction" class="nav-link" aria-label="v0.5"><!--[--><!--]--> v0.5 <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/branch/can-packetization-rework/spec/v0.4/introduction" class="nav-link" aria-label="v0.4"><!--[--><!--]--> v0.4 <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/branch/can-packetization-rework/spec/v0.3/1a_introduction" class="nav-link" aria-label="v0.3"><!--[--><!--]--> v0.3 <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/branch/can-packetization-rework/spec/v0.2/1a_introduction" class="nav-link" aria-label="v0.2"><!--[--><!--]--> v0.2 <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/branch/can-packetization-rework/spec/v0.1/" class="nav-link" aria-label="v0.1"><!--[--><!--]--> v0.1 <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/branch/can-packetization-rework/spec/changelog" class="nav-link" aria-label="Changelog"><!--[--><!--]--> Changelog <!--[--><!--]--></a></li><!--]--></ul></div></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-links"><!--[--><!--[--><p class="sidebar-heading sidebar-item">Introduction</p><ul class=""><li><!--[--><a href="/branch/can-packetization-rework/spec/v0.6/introduction/abstract.html" class="nav-link sidebar-item" aria-label="Abstract"><!--[--><!--]--> Abstract <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/branch/can-packetization-rework/spec/v0.6/introduction/objectives.html" class="nav-link sidebar-item" aria-label="Objectives"><!--[--><!--]--> Objectives <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/branch/can-packetization-rework/spec/v0.6/introduction/terminology.html" class="nav-link sidebar-item" aria-label="Terminology"><!--[--><!--]--> Terminology <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--[--><p class="sidebar-heading sidebar-item">Data Model</p><ul class=""><li><!--[--><a href="/branch/can-packetization-rework/spec/v0.6/data_model/structure.html" class="nav-link sidebar-item" aria-label="Structure"><!--[--><!--]--> Structure <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/branch/can-packetization-rework/spec/v0.6/data_model/overlays.html" class="nav-link sidebar-item" aria-label="Overlays"><!--[--><!--]--> Overlays <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--[--><p class="sidebar-heading sidebar-item">Protocol</p><ul class=""><li><!--[--><a href="/branch/can-packetization-rework/spec/v0.6/protocol/connectivity.html" class="nav-link sidebar-item" aria-label="Connectivity"><!--[--><!--]--> Connectivity <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/branch/can-packetization-rework/spec/v0.6/protocol/functions.html" class="nav-link sidebar-item" aria-label="Access Functions"><!--[--><!--]--> Access Functions <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/branch/can-packetization-rework/spec/v0.6/protocol/text_mode.html" class="nav-link sidebar-item" aria-label="Text Mode"><!--[--><!--]--> Text Mode <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/branch/can-packetization-rework/spec/v0.6/protocol/binary_mode.html" class="nav-link sidebar-item" aria-label="Binary Mode"><!--[--><!--]--> Binary Mode <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--[--><p class="sidebar-heading sidebar-item active">Transports</p><ul class=""><li><!--[--><a href="/branch/can-packetization-rework/spec/v0.6/transports/serial.html" class="nav-link sidebar-item" aria-label="Serial"><!--[--><!--]--> Serial <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/branch/can-packetization-rework/spec/v0.6/transports/websocket.html" class="nav-link sidebar-item" aria-label="WebSocket"><!--[--><!--]--> WebSocket <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/branch/can-packetization-rework/spec/v0.6/transports/can.html" class="nav-link sidebar-item" aria-label="CAN"><!--[--><!--]--> CAN <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/branch/can-packetization-rework/spec/v0.6/transports/bluetooth.html" class="router-link-active router-link-exact-active nav-link router-link-active sidebar-item active" aria-label="BLE"><!--[--><!--]--> BLE <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/branch/can-packetization-rework/spec/v0.6/transports/bluetooth.html#packetization" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="Packetization"><!--[--><!--]--> Packetization <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/branch/can-packetization-rework/spec/v0.6/transports/bluetooth.html#ble-service" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="BLE Service"><!--[--><!--]--> BLE Service <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/branch/can-packetization-rework/spec/v0.6/transports/bluetooth.html#example" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="Example"><!--[--><!--]--> Example <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li></ul><!--]--><!--[--><p class="sidebar-heading sidebar-item">Mappings</p><ul class=""><li><!--[--><a href="/branch/can-packetization-rework/spec/v0.6/mappings/mqtt.html" class="nav-link sidebar-item" aria-label="MQTT"><!--[--><!--]--> MQTT <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/branch/can-packetization-rework/spec/v0.6/mappings/coap.html" class="nav-link sidebar-item" aria-label="CoAP"><!--[--><!--]--> CoAP <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/branch/can-packetization-rework/spec/v0.6/mappings/lorawan.html" class="nav-link sidebar-item" aria-label="LoRaWAN"><!--[--><!--]--> LoRaWAN <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--[--><p class="sidebar-heading sidebar-item">Annex</p><ul class=""><li><!--[--><a href="/branch/can-packetization-rework/spec/v0.6/annex/a_existing_solutions.html" class="nav-link sidebar-item" aria-label="Annex A: Existing Solutions"><!--[--><!--]--> Annex A: Existing Solutions <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/branch/can-packetization-rework/spec/v0.6/annex/b_tools.html" class="nav-link sidebar-item" aria-label="Annex B: Tools"><!--[--><!--]--> Annex B: Tools <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--]--></ul><!--[--><!--]--></aside><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><h1 id="bluetooth-low-energy" tabindex="-1"><a class="header-anchor" href="#bluetooth-low-energy" aria-hidden="true">#</a> Bluetooth Low-Energy</h1><p>Bluetooth Low-Energy (BLE) is designed to transfer only relatively small amounts of data per message.</p><p>The GATT profile allows to define so-called characteristics, which are similar to a single data object in ThingSet. However, the characteristics have to be pre-defined using UUIDs and their semantics have to be known by both the device and the host. Mapping each data object to a characteristic would undermine the flexibility and discoverability of the ThingSet protocol.</p><p>Instead of defining characteristics for every data objects, one single service with two GATT characteristics is used to transfer ThingSet protocol data in a bi-directional way.</p><h2 id="packetization" tabindex="-1"><a class="header-anchor" href="#packetization" aria-hidden="true">#</a> Packetization</h2><p>Long attribute values (ATT) can have a length of max. 512 bytes (see Core Spec v5.3, Section 3.2.9).</p><p>A single LinkLayer packet can have max. 251 bytes of data (LE Data Packet Length Extension, BT v4.2, see also <a href="https://punchthrough.com/maximizing-ble-throughput-part-3-data-length-extension-dle-2/" target="_blank" rel="noopener noreferrer">here<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a>). This results in 244 bytes of payload.</p><p>Above packet size (which is even lower on older phones) is not considered sufficient for ThingSet, so the messages have to be split into multiple packets and afterwards be re-assembled by the receiver.</p><p>For ThingSet, all packets exchanged over BLE are considered a continuous stream of bytes, similar to a serial interface. A packetization mechanism similar to <a href="https://datatracker.ietf.org/doc/html/rfc1055" target="_blank" rel="noopener noreferrer">RFC 1055<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a> is used to distinguish single frames inside the data stream.</p><p>Each packet ends with a line-feed character (<code>0x0A</code>), which is never part of any ThingSet message in text mode andyway. Carriage-return characters (<code>0x0D</code>) characters are skipped in the stream so that a text file could be interpreted as a sequence of ThingSet messages independent of the line ending used, allowing to store and batch-process ThingSet messages easily.</p><p>If one of the above characters is part of an actual binary message, it is replaced with the escape character <code>0xCE</code>, followed by a special character depending on the represented character to be escaped (see table below). The escape characters were chosen such that they are not used for a ThingSet response code and not part of usual CBOR encoding (they are used for currently unassigned tags). This reduces the probability to need escaping.</p><p>An additional line-feed character may also be used at the start of a new packet to have a defined start after interrupted streams. This would lead to an empty packet, which must be ignored.</p><p>Existing BLE stacks e.g. in Android are implemented such that the order of messages is maintained, which avoids requiring an any packet counter. The BLE LL provides reliable transport for notifications. Indications are not used, as the ACK of indications provides little to no benefit (see <a href="https://stackoverflow.com/questions/36075763/ble-indications" target="_blank" rel="noopener noreferrer">here<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a>)</p><h2 id="ble-service" tabindex="-1"><a class="header-anchor" href="#ble-service" aria-hidden="true">#</a> BLE Service</h2><p>The following UUIDs are used for the ThingSet BLE service and the two request and response characteristics:</p><div class="language-javascript ext-js"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token constant">UUID_THINGSET_SERVICE</span>  <span class="token operator">=</span> <span class="token string">&quot;00000001-5423-4887-9c6a-14ad27bfc06d&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token constant">UUID_THINGSET_DOWNLINK</span> <span class="token operator">=</span> <span class="token string">&quot;00000002-5423-4887-9c6a-14ad27bfc06d&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token constant">UUID_THINGSET_UPLINK</span>   <span class="token operator">=</span> <span class="token string">&quot;00000003-5423-4887-9c6a-14ad27bfc06d&quot;</span><span class="token punctuation">;</span>
</code></pre></div><p>The downlink characteristic is used to send ThingSet requests or desires from the central device to the peripheral. The peripheral uses the uplink characteristic to send notifications with responses or reports back to the central device.</p><h2 id="example" tabindex="-1"><a class="header-anchor" href="#example" aria-hidden="true">#</a> Example</h2><p>For the following example, non-readable characters are displayed as their hex value wrapped in angular brackets, e.g. <code>&lt;0A&gt;</code>.</p><p>The following characters are used for SLIP:</p><table><thead><tr><th>Name</th><th>Value</th></tr></thead><tbody><tr><td>MSG_END</td><td><code>&lt;0A&gt;</code></td></tr><tr><td>MSG_SKIP</td><td><code>&lt;0D&gt;</code></td></tr><tr><td>MSG_ESC</td><td><code>&lt;CE&gt;</code></td></tr><tr><td>MSG_ESC_END</td><td><code>&lt;CA&gt;</code></td></tr><tr><td>MSG_ESC_SKIP</td><td><code>&lt;CD&gt;</code></td></tr><tr><td>MSG_ESC_ESC</td><td><code>&lt;CF&gt;</code></td></tr></tbody></table><p>ThingSet request from BLE central to peripheral (short message, fits into a single packet):</p><pre><code>?Bat&lt;0A&gt;                                    # packet 1
</code></pre><p>The same message including an optional <code>MSG_END</code> character at the beginning of the message:</p><pre><code>&lt;0A&gt;?Bat&lt;0A&gt;                                # packet 1
</code></pre><p>Response via notification from peripheral to central (message split into multiple packets, assuming 20 bytes maximum payload length):</p><pre><code>:85 {&quot;rMeas_V&quot;:12.9,                        # packet 1
&quot;rMeas_A&quot;:-3.14,&quot;sTa                        # packet 2
rget_V&quot;:14.4}&lt;0A&gt;                           # packet 3
</code></pre><p>Re-assembled response: <code>:85 {&quot;rMeas_V&quot;:12.9,&quot;rMeas_A&quot;:-3.14,&quot;sTarget_V&quot;:14.4}</code></p><p>As ASCII strings (like usual ThingSet text-mode messages) never contain the <code>MSG_END</code> character within the message, no escaping is necessary in this example. It has to be implemented for the binary mode, though.</p><p>A binary report containing the number 13, which is encoded as <code>0x0D</code> would look like this:</p><pre><code>&lt;1F&gt;&lt;00&gt;&lt;A1&gt;&lt;18&gt;&lt;40&gt;&lt;CE&gt;&lt;CD&gt;&lt;0A&gt;            # packet 1
</code></pre><p>The un-escaped final message is as follows:</p><pre><code>1F
   00                                   # CBOR uint: 0x00 (root ID)
   A1                                   # CBOR map (1 elements)
      18 40                             # CBOR uint: 0x40 (object ID)
      0D                                # CBOR uint: 13
</code></pre><!--]--></div><footer class="page-meta"><div class="meta-item edit-link"><a class="nav-link external meta-item-label" href="https://github.com/ThingSet/thingset.github.io/edit/can-packetization-rework/docs/spec/v0.6/transports/bluetooth.md" rel="noopener noreferrer" target="_blank" aria-label="Edit this page"><!--[--><!--]--> Edit this page <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><div class="meta-item last-updated"><span class="meta-item-label">Last Updated: </span><span class="meta-item-info">2/10/2024, 8:15:40 PM</span></div><!----></footer><nav class="page-nav"><p class="inner"><span class="prev"> ‚Üê <a href="/branch/can-packetization-rework/spec/v0.6/transports/can.html" class="nav-link" aria-label="CAN"><!--[--><!--]--> CAN <!--[--><!--]--></a></span><!----></p></nav><!--[--><!--]--></main><!--]--></div><div class="footer"><span style="padding:5px;"><a href="https://github.com/ThingSet"><img src="/images/github-logo.svg" height="14"> GitHub</a></span> | <span style="padding:5px;">Developed by Libre Solar Technologies GmbH</span> | <span style="padding:5px;"><a href="/contact.html">Contact / Impressum</a></span></div><!--]--><!----><!--]--></div>
    <script src="/branch/can-packetization-rework/assets/js/runtime~app.21595170.js" defer></script><script src="/branch/can-packetization-rework/assets/js/9296.89757b8c.js" defer></script><script src="/branch/can-packetization-rework/assets/js/app.707d249a.js" defer></script>
  </body>
</html>
